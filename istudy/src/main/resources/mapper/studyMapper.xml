<!-- 
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="com.hot6.project.dao.StudyDAO">
	<select id="StudyRecommend" resultType="StudyVO">
		SELECT 	  	A.*, D.lang_type_name,
				  	E.study_type_name, F.*,
                  	G.in_people,
                  	(A.max -  G.in_people) AS remain
		FROM 	  	study_room A
		LEFT JOIN 	user B
		ON 		  	A.study_type_num = B.study_type_num
        JOIN 	study_lang_type C
        ON 		  	C.study_num = A.study_num
        JOIN		lang_type D 
        ON			C.lang_type_num = D.lang_type_num
        JOIN 	study_type E
        ON 		  	E.study_type_num =  A.study_type_num
        JOIN 	hashtag F
        ON 		  	F.study_num = A.study_num
        left join 	(select study_num, COUNT(want_ok) AS in_people from study_mate where want_ok='T' group by study_num ) G
        on		  	G.study_num=A.study_num
		where 	 	B.user_id = 'eeee0000'
        GROUP BY  	A.study_num
        order by  	remain, A.study_num
        LIMIT 	  	6;
	</select>
	
	<select id="CalendarList" resultType="StudyVO">
		SELECT 		A.*, B.color_name
		FROM 		calendar A
		LEFT JOIN 	calendar_color B
		ON 			A.color_num = B.color_num
		WHERE 		study_num=#{param1}
	</select>
	
	<insert id="PlanInsert">
		INSERT calendar(study_num, plan_name, plan_detail, plan_start, plan_finish, start_time, finish_time, color_num)
		VALUES (#{study_num}, #{plan_name}, #{plan_detail}, #{plan_start}, #{plan_finish}, #{start_time}, #{finish_time}, #{color_num})
	</insert>
	
	<select id="CalendarDetail" resultType="StudyVO">
		SELECT 	A.*, B.color_name
		FROM 	calendar A
		JOIN 	calendar_color B
		ON		B.color_num = A.color_num
		WHERE 	A.plan_num = #{param1}
	</select>
	
	<delete id="CalendarDel">
		DELETE FROM calendar 
		WHERE plan_num=#{param1}
	</delete>
	
	<update id="CalendarEdit">
		UPDATE 	calendar 
		SET 	plan_name=#{plan_name}, plan_detail=#{plan_detail}, plan_start=#{plan_start}, plan_finish=#{plan_finish}, 
				start_time=#{start_time}, finish_time=#{finish_time}, color_num=#{color_num} 
		WHERE 	plan_num=#{plan_num}; 
	</update>
</mapper>
-->