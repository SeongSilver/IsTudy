<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.hot6.project.dao.StudyDAO">
	<select id="StudyRecommend" resultType="StudyVO">
		SELECT 	  A.*, (select D.lang_type_name from lang_type D where C.lang_type_num01 = D.lang_type_num) as lang01, 
				  (select D.lang_type_name from lang_type D where C.lang_type_num02 = D.lang_type_num) as lang02,
				  (select D.lang_type_name from lang_type D where C.lang_type_num03 = D.lang_type_num) as lang03,
				  E.study_type_name,
                  F.*
		FROM 	  study_room A
		LEFT JOIN user B
		ON 		  A.study_type_num = B.study_type_num
        LEFT JOIN study_lang_type C
        ON 		  C.study_num = A.study_num
        LEFT JOIN study_type E
        ON 		  E.study_type_num =  A.study_type_num
        LEFT JOIN hashtag F
        ON 		  F.study_num = A.study_num
		WHERE 	  B.user_id = #{param1}
        GROUP BY  A.study_num
        LIMIT 	  6;
	</select>
	
	<select id="CalendarList" resultType="StudyVO">
		SELECT 		A.*, B.color_name
		FROM 		calendar A
		LEFT JOIN 	calendar_color B
		ON 			A.color_num = B.color_num
		WHERE 		study_num=#{param1}
	</select>
	
	<insert id="PlanInsert">
		INSERT calendar(study_num, plan_name, plan_detail, plan_start, plan_finish, start_time, finish_time, color_num)
		VALUES (#{study_num}, #{plan_name}, #{plan_detail}, #{plan_start}, #{plan_finish}, #{start_time}, #{finish_time}, #{color_num})
	</insert>
</mapper>